var http = require('http');var server = http.createServer();var url = require('url');var wines = require('./routes/wines');require('./socketFunctions');server.listen(2000);console.log('Listening on port 2000...');server.on('request', function(req, res) {          console.log("Method %s %s", req.method, req.url);          if (req.method === 'GET' && req.url === '/wines')          {          var body = wines.getAll();          console.log("Data: %s", body);          res.writeHead(200, {                        'Content-Length': body.length,                        'Content-Type': 'application/json' });          res.write(body);          }          else if (req.method === 'POST' && req.url === '/wines')          {          var body = '';                    req.on('data', function(data) {                 console.log("Raw Data: " + data);                 body += data.toString();                 });                    req.on('end', function () {                 var start = body.indexOf("{");                 var end = body.indexOf("}");                 var wineJsonData = body.substr(start, (end - start) + 1);                 wineJsonData = wineJsonData.replace(/^\s+|\s+$/gm,'');                 wineJsonData = wineJsonData.replace(/\n/g, '');                 wineJsonData = wineJsonData.replace(/ /g, '');                 var wineData = JSON.parse(wineJsonData);                                  console.log("Wine Data: " + wineJsonData);                 var done = wines.addWine(wineData);                                  res.writeHead(200, {                               'Content-Length': wineJsonData.length,                               'Content-Type': 'application/json' });                 res.write(wineJsonData);                 });          }          });server.on('end', function () {          console.log("Done");          });server.on('error', function(err) {          console.log('problem with request: ' + err.message);          });